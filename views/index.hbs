<div class='container py-5'>

  <div class='row'>
    <div class='col-8 mx-auto'>
      <form action="/expenses/filter">
      <select
        class='form-select form-select-lg mb-3'
        id='filer'
        name='selectOption'
        onchange='submit()'
      >
        <option value="">所有類別</option>
        {{#each categories}}
          <option value='{{this.name}}' {{#is this.name ../filterOption}} selected {{/is}}>{{this.name}}</option>
        {{/each}}
      </select>
      </form>
    </div>
    <div class='col-8 mx-auto'>
      <div class='row'>
        <div class='col-4'>
          <p>總金額:</p>
        </div>
        <div class='col-8'>
          <p>{{totalAmount}}</p>
        </div>
      </div>
    </div>
    <div class='record-list col-8 mx-auto'>
      <div class='row'>
        <div class='col-9 mx-auto'>
          <ul class='list-group'>
            {{#each records}}
              <li class='list-group-item'>
                <div class='row'>
                  <div class='col-10 mr-auto'>
                    {{#each ../categories}}
                      {{#is ../this.category this.name}}
                        {{{this.icon}}}
                      {{/is}}
                    {{/each}}
                    <h4 style='display: inline; vertical-align: middle;'>
                      {{this.name}}
                    </h4>
                  </div>
                  <div class='col-2 mr-auto'>
                    <span>{{this.amount}}</span>
                  </div>
                </div>
              </li>
            {{/each}}
          </ul>
        </div>
        <div class='col-3'>
          {{#each records}}
            <ul class='list-group list-group-horizontal'>
              <li class='list-group-item'><a
                  href='/expenses/{{this._id}}/edit'
                >修改</a></li>
              <li class='list-group-item'>
                <form
                  action='/expenses/{{this._id}}?_method=DELETE'
                  method='POST'
                >
                  <button class='btn' type='submit'>刪除</button>
                </form>
              </li>
            </ul>
          {{/each}}
        </div>
      </div>
    </div>
    <div class='col-12 mt-2' style='text-align:center;'>
      <a class='btn btn-danger' href='/expenses/add' role='button'>新增支出</a>
    </div>
  </div>
</div>